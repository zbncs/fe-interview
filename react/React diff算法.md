# react diff

why & what

传统的diff算法比较两棵树复杂度为O(n ^3)，react为了降低复杂度，在传统diff算法上做了改动：只对同级元素进行比较。
尽快找出虚拟dom变化的部分

how

diff的三个策略：

tree diff

只对同层比较，忽略节点的移动操作。旧节点不存在就创建，少了就删除。

component diff

分为相同类型的组件和不同类型的组件。
相同类型，继续向下diff。
不同类型，直接替换整个组件。

element diff

同级节点通过key进行比较，有三种操作：
插入：新节点有，旧节点不存在
移动：旧节点在新节点集合中，并且key值相同，只是位置发生了变化。通过对比lastIndex > index 就会发生移动。index是旧节点位置.
删除：新节点没有老节点的元素



